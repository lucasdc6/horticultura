(this["webpackJsonphorticultura-oo2"]=this["webpackJsonphorticultura-oo2"]||[]).push([[0],{161:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),a=n(45),c=n.n(a),s=n(9),o=n(58),d=n(250),l=n(243),u=n(239),b=n(56),j=n(126),p=n.n(j),O=n(127),x=n.n(O),h=n(47),m=n(55),g=n(232),f=n(238),v=n(102),L=n(246),I=n(175),w=n(134),k=n(2),C={top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"70%",height:{xs:"65%",md:"30%"},position:"absolute",bgcolor:"#FFF",padding:"2em"},y=Object(r.forwardRef)((function(e,t){var n=e.closeModal,i=e.activeIngredientList,a=e.activeIngredientsLoading,c=e.aptitudeList,d=e.aptitudesLoading,u=e.cropList,b=e.cropsLoading,j=e.residualLimitPost,p=(e.residualLimitGet,Object(r.useState)(null)),O=Object(s.a)(p,2),x=O[0],h=O[1],y=Object(r.useState)(null),S=Object(s.a)(y,2),E=S[0],T=S[1],A=Object(r.useState)(null),M=Object(s.a)(A,2),P=M[0],R=M[1],N=Object(r.useState)(0),V=Object(s.a)(N,2),F=V[0],G=V[1],q=Object(r.useState)(!1),_=Object(s.a)(q,2),B=_[0],D=_[1],J=Object(r.useCallback)((function(e,t){var r={active_ingredient:"".concat(x),aptitude:"".concat(E),crop:"".concat(P),residual:"".concat(F),harvest:"".concat(B)};j(r),n()}),[j,x,E,P,F,B,n]);return Object(k.jsxs)(l.a,{sx:C,ref:t,children:[Object(k.jsx)("h2",{children:"Agregar"}),Object(k.jsxs)(g.a,{direction:{xs:"column",md:"row"},justifyContent:"center",alignItems:"center",spacing:{xs:1,md:2},children:[Object(k.jsx)(f.a,{sx:{width:"100%"},id:"activeIngredient",options:i,getOptionLabel:function(e){return e.name},onChange:function(e,t){h(t?t.id:null)},loading:a,isOptionEqualToValue:function(e,t){return e.id===t.id},renderInput:function(e){return Object(k.jsx)(v.a,Object(m.a)(Object(m.a)({},e),{},{label:"Ingrediente activo",variant:"outlined"}))}}),Object(k.jsx)(f.a,{sx:{width:"100%"},id:"aptitudes",options:c,getOptionLabel:function(e){return e.name},onChange:function(e,t){T(t?t.id:null)},loading:d,isOptionEqualToValue:function(e,t){return e.id===t.id},renderInput:function(e){return Object(k.jsx)(v.a,Object(m.a)(Object(m.a)({},e),{},{label:"Aptitud",variant:"outlined"}))}}),Object(k.jsx)(f.a,{sx:{width:"100%"},id:"crops",options:u,getOptionLabel:function(e){return e.name},onChange:function(e,t){R(t?t.id:null)},loading:b,isOptionEqualToValue:function(e,t){return e.id===t.id},renderInput:function(e){return Object(k.jsx)(v.a,Object(m.a)(Object(m.a)({},e),{},{label:"Cultivos",variant:"outlined"}))}})]}),Object(k.jsxs)(g.a,{direction:{xs:"column",md:"row"},justifyContent:"left",alignItems:"center",spacing:{xs:1,md:2},sx:{paddingTop:"1em"},children:[Object(k.jsx)(v.a,{sx:{width:{xs:"100%",md:"32%",lg:"32.5%"}},id:"residual",label:"Residuos",type:"number",inputProps:{min:0},onChange:function(e,t){G(e.target.value)},endadornment:Object(k.jsx)(L.a,{position:"end",children:"g"})}),Object(k.jsx)(I.a,{control:Object(k.jsx)(w.a,{checked:B,onChange:function(e,t){D(t)}}),label:"Post Cosecha"})]}),Object(k.jsx)(g.a,{direction:{xs:"column",md:"row"},justifyContent:"flex-end",alignItems:"flex-end",spacing:{xs:1,md:2},sx:{paddingTop:"1em"},children:Object(k.jsx)(o.a,{variant:"contained",disabled:!(x&&E&&P&&F),onClick:J,children:"Guardar"})})]})})),S=n(241),E=n(248),T=function(e){var t="";switch(e){case 401:t="Acceso no autorizado";break;case 403:t="Acceso denegado";break;case 404:t="Recurso no encontrado";break;case 405:case 406:case 407:case 408:case 409:case 410:case 411:case 412:case 413:case 414:case 415:case 416:case 417:case 418:t="Error desconocido, por favor, contacte con el administrador del sitio";break;case 500:case 501:case 502:case 503:case 505:case 511:t="Error interno del servidor, por favor, contacte con el administrador del sitio";break;case 504:t="Se esper\xf3 demasiado tiempo la respuesta, por favor, intentelo m\xe1s tarde";break;default:t="Problema de conexi\xf3n"}return t},A=function(e){var t=e.residualLimit,n=e.residualLimitList,r=e.activeIngredient,i=e.aptitude,a=e.crop;return n.error||t.error||r.error||i.error||a.error?Object(k.jsxs)(S.a,{style:{marginTop:"1em",marginBottom:"1em"},severity:"error",children:[Object(k.jsx)(E.a,{children:"Algo sali\xf3 mal"}),Object(k.jsxs)("ul",{children:[t.error&&Object(k.jsxs)("li",{children:[Object(k.jsx)("b",{children:"Operaciones con residuos l\xedmite:"})," ",T(t.response.status)]}),n.error&&Object(k.jsxs)("li",{children:[Object(k.jsx)("b",{children:"Residuos l\xedmite:"})," ",T(n.response.status)]}),r.error&&Object(k.jsxs)("li",{children:[Object(k.jsx)("b",{children:"Ingredientes activos:"})," ",T(r.response.status)]}),i.error&&Object(k.jsxs)("li",{children:[Object(k.jsx)("b",{children:"Aptitudes:"})," ",T(i.response.status)]}),a.error&&Object(k.jsxs)("li",{children:[Object(k.jsx)("b",{children:"Cultivos:"})," ",T(a.response.status)]})]})]}):null},M=function(e){return{id:e.id,activeIngredient:e.active_ingredient.name,aptitude:e.aptitude.name,crop:e.crop.name,residual:e.residual,harvest:e.harvest}},P=function(){var e=Object(r.useState)(!1),t=Object(s.a)(e,2),n=t[0],i=t[1],a=Object(r.useState)([]),c=Object(s.a)(a,2),j=c[0],O=c[1],m={data:[],cachePolicy:"no-cache"},g=Object(h.b)("/residual-limits",{data:{}}),f=g.error,v=g.response,L=g.post,I=g.put,w=g.del,C=Object(h.b)("/residual-limits",m,[v.data]),S=C.error,E=C.response,T=C.data,P=C.loading,R=Object(h.b)("/active-ingredients",m,[n]),N=R.error,V=R.response,F=R.data,G=R.loading,q=Object(h.b)("/aptitudes",m,[n]),_=q.error,B=q.response,D=q.data,J=q.loading,z=Object(h.b)("/crops",m,[n]),W=z.error,H=z.response,K=z.data,Q=z.loading,U=[{field:"id",headerName:"ID",width:75,hide:!0,sortable:!1,disableExport:!0},{field:"activeIngredient",headerName:"Ingredientes activos",flex:3,editable:!0,type:"singleSelect",valueOptions:V.ok?F.map((function(e){return e.name})):[],sortable:!1},{field:"aptitude",headerName:"Aptiudes",flex:2,editable:!0,type:"singleSelect",valueOptions:B.ok?D.map((function(e){return e.name})):[],sortable:!1},{field:"crop",headerName:"Cultivos",flex:1,editable:!0,type:"singleSelect",valueOptions:H.ok?K.map((function(e){return e.name})):[],sortable:!1},{field:"residual",headerName:"Residuos",flex:1,editable:!0,type:"number",sortable:!1},{field:"harvest",headerName:"Post-cosecha",flex:1,editable:!0,type:"boolean",sortable:!1}],X=Object(r.useCallback)((function(e,t){var n=F.find((function(t){return t.name===e.getValue(e.id,"activeIngredient")})),r=D.find((function(t){return t.name===e.getValue(e.id,"aptitude")})),i=K.find((function(t){return t.name===e.getValue(e.id,"crop")})),a={active_ingredient:"".concat(n.id),aptitude:"".concat(r.id),crop:"".concat(i.id),residual:"".concat(e.row.residual),harvest:"".concat(e.row.harvest)};I("".concat(e.row.id),a)}),[I,F,D,K]);return Object(k.jsx)(d.a,{maxWidth:"xl",children:Object(k.jsxs)(l.a,{sx:{height:700,width:"100%"},children:[Object(k.jsx)(A,{residualLimit:{error:f,response:v},residualLimitList:{error:S,response:E},activeIngredient:{error:N,response:V},aptitude:{error:_,response:B},crop:{error:W,response:H}}),Object(k.jsx)(u.a,{open:n,onClose:function(){return i(!1)},"aria-labelledby":"add-residual-limit","aria-describedby":"add-residual-limit-form",children:Object(k.jsx)(k.Fragment,{children:Object(k.jsx)(y,{closeModal:function(){return i(!1)},activeIngredientList:F,activeIngredientsLoading:G,aptitudeList:D,aptitudesLoading:J,cropList:K,cropsLoading:Q,residualLimitPost:L})})}),Object(k.jsx)(b.a,{components:{Toolbar:function(){return Object(k.jsxs)(b.c,{children:[Object(k.jsx)(o.a,{color:"primary",startIcon:Object(k.jsx)(p.a,{}),onClick:function(){return i(!0)},children:"Agregar"}),Object(k.jsx)(o.a,{color:"primary",startIcon:Object(k.jsx)(x.a,{}),disabled:!j.length,onClick:function(){j.forEach((function(e){return w("".concat(e))}))},children:"Eliminar"}),Object(k.jsx)(b.b,{}),Object(k.jsx)(b.e,{}),Object(k.jsx)(b.d,{})]})}},rows:E.ok?T.map(M):[],columns:U,checkboxSelection:!0,editMode:"row",loading:P,onRowEditStop:X,onSelectionModelChange:function(e){return O(e)},sortModel:[{field:"id",sort:"asc"}],localeText:b.f.components.MuiDataGrid.defaultProps.localeText})]})})},R=n(48),N=n(252),V=n(251),F=n(249),G=n(247),q=Object(R.b)();var _=function(){return Object(k.jsx)(N.a,{theme:q,children:Object(k.jsx)(h.a,{url:"https://horticultura.herokuapp.com",children:Object(k.jsxs)(l.a,{sx:{flexGrow:1},children:[Object(k.jsx)(V.a,{position:"static",children:Object(k.jsx)(F.a,{children:Object(k.jsx)(G.a,{variant:"h6",children:"L\xedmites m\xe1ximos de residuos (LMR)"})})}),Object(k.jsx)(P,{})]})})})};c.a.render(Object(k.jsx)(i.a.StrictMode,{children:Object(k.jsx)(_,{})}),document.getElementById("root"))}},[[161,1,2]]]);
//# sourceMappingURL=main.4277038e.chunk.js.map