(this["webpackJsonphorticultura-oo2"]=this["webpackJsonphorticultura-oo2"]||[]).push([[0],{160:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),c=n(45),o=n.n(c),r=n(9),d=n(58),s=n(247),l=n(241),u=n(238),b=n(56),j=n(124),p=n.n(j),O=n(125),h=n.n(O),x=n(47),m=n(55),f=n(231),g=n(237),v=n(99),w=n(244),I=n(174),L=n(132),C=n(2),y={top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"70%",height:{xs:"65%",md:"30%"},position:"absolute",bgcolor:"#FFF",padding:"2em"},S=Object(i.forwardRef)((function(e,t){var n=e.closeModal,a=e.activeIngredientList,c=e.activeIngredientsLoading,o=e.aptitudeList,s=e.aptitudesLoading,u=e.cropList,b=e.cropsLoading,j=e.residualLimitPost,p=(e.residualLimitGet,Object(i.useState)(null)),O=Object(r.a)(p,2),h=O[0],x=O[1],S=Object(i.useState)(null),k=Object(r.a)(S,2),E=k[0],M=k[1],T=Object(i.useState)(null),P=Object(r.a)(T,2),N=P[0],V=P[1],R=Object(i.useState)(0),A=Object(r.a)(R,2),F=A[0],G=A[1],q=Object(i.useState)(!1),_=Object(r.a)(q,2),D=_[0],J=_[1],B=Object(i.useCallback)((function(e,t){var i={active_ingredient:"".concat(h),aptitude:"".concat(E),crop:"".concat(N),residual:"".concat(F),harvest:"".concat(D)};j(i),n()}),[j,h,E,N,F,D,n]);return Object(C.jsxs)(l.a,{sx:y,ref:t,children:[Object(C.jsx)("h2",{children:"Agregar"}),Object(C.jsxs)(f.a,{direction:{xs:"column",md:"row"},justifyContent:"center",alignItems:"center",spacing:{xs:1,md:2},children:[Object(C.jsx)(g.a,{sx:{width:"100%"},id:"activeIngredient",options:a,getOptionLabel:function(e){return e.name},onChange:function(e,t){x(t?t.id:null)},loading:c,isOptionEqualToValue:function(e,t){return e.id===t.id},renderInput:function(e){return Object(C.jsx)(v.a,Object(m.a)(Object(m.a)({},e),{},{label:"Ingrediente activo",variant:"outlined"}))}}),Object(C.jsx)(g.a,{sx:{width:"100%"},id:"aptitudes",options:o,getOptionLabel:function(e){return e.name},onChange:function(e,t){M(t?t.id:null)},loading:s,isOptionEqualToValue:function(e,t){return e.id===t.id},renderInput:function(e){return Object(C.jsx)(v.a,Object(m.a)(Object(m.a)({},e),{},{label:"Aptitud",variant:"outlined"}))}}),Object(C.jsx)(g.a,{sx:{width:"100%"},id:"crops",options:u,getOptionLabel:function(e){return e.name},onChange:function(e,t){V(t?t.id:null)},loading:b,isOptionEqualToValue:function(e,t){return e.id===t.id},renderInput:function(e){return Object(C.jsx)(v.a,Object(m.a)(Object(m.a)({},e),{},{label:"Cultivos",variant:"outlined"}))}})]}),Object(C.jsxs)(f.a,{direction:{xs:"column",md:"row"},justifyContent:"left",alignItems:"center",spacing:{xs:1,md:2},sx:{paddingTop:"1em"},children:[Object(C.jsx)(v.a,{sx:{width:{xs:"100%",md:"32%",lg:"32.5%"}},id:"residual",label:"Residuos",type:"number",inputProps:{min:0},onChange:function(e,t){G(e.target.value)},endadornment:Object(C.jsx)(w.a,{position:"end",children:"g"})}),Object(C.jsx)(I.a,{control:Object(C.jsx)(L.a,{checked:D,onChange:function(e,t){J(t)}}),label:"Post Cosecha"})]}),Object(C.jsx)(f.a,{direction:{xs:"column",md:"row"},justifyContent:"flex-end",alignItems:"flex-end",spacing:{xs:1,md:2},sx:{paddingTop:"1em"},children:Object(C.jsx)(d.a,{variant:"contained",disabled:!(h&&E&&N&&F),onClick:B,children:"Guardar"})})]})})),k=function(e){return{id:e.id,activeIngredient:e.active_ingredient.name,aptitude:e.aptitude.name,crop:e.crop.name,residual:e.residual,harvest:e.harvest}},E=function(){var e=Object(i.useState)(!1),t=Object(r.a)(e,2),n=t[0],a=t[1],c=Object(i.useState)([]),o=Object(r.a)(c,2),j=o[0],O=o[1],m={data:[],cachePolicy:"no-cache"},f=Object(x.b)("/residual-limits",{data:{}}),g=f.post,v=f.put,w=f.del,I=f.response,L=Object(x.b)("/residual-limits",m,[I.data]),y=L.data,E=L.loading,M=Object(x.b)("/active-ingredients",m,[n]),T=M.data,P=M.loading,N=Object(x.b)("/aptitudes",m,[n]),V=N.data,R=N.loading,A=Object(x.b)("/crops",m,[n]),F=A.data,G=A.loading,q=[{field:"id",headerName:"ID",width:75,hide:!0,sortable:!1,disableExport:!0},{field:"activeIngredient",headerName:"Ingredientes activos",flex:3,editable:!0,type:"singleSelect",valueOptions:T.map((function(e){return e.name})),sortable:!1},{field:"aptitude",headerName:"Aptiudes",flex:2,editable:!0,type:"singleSelect",valueOptions:V.map((function(e){return e.name})),sortable:!1},{field:"crop",headerName:"Cultivos",flex:1,editable:!0,type:"singleSelect",valueOptions:F.map((function(e){return e.name})),sortable:!1},{field:"residual",headerName:"Residuos",flex:1,editable:!0,type:"number",sortable:!1},{field:"harvest",headerName:"Post-cosecha",flex:1,editable:!0,type:"boolean",sortable:!1}],_=Object(i.useCallback)((function(e,t){var n=T.find((function(t){return t.name===e.getValue(e.id,"activeIngredient")})),i=V.find((function(t){return t.name===e.getValue(e.id,"aptitude")})),a=F.find((function(t){return t.name===e.getValue(e.id,"crop")})),c={active_ingredient:"".concat(n.id),aptitude:"".concat(i.id),crop:"".concat(a.id),residual:"".concat(e.row.residual),harvest:"".concat(e.row.harvest)};v("".concat(e.row.id),c)}),[v,T,V,F]);return Object(C.jsx)(s.a,{maxWidth:"xl",children:Object(C.jsxs)(l.a,{sx:{height:750,width:"100%"},children:[Object(C.jsx)(u.a,{open:n,onClose:function(){return a(!1)},"aria-labelledby":"add-residual-limit","aria-describedby":"add-residual-limit-form",children:Object(C.jsx)(C.Fragment,{children:Object(C.jsx)(S,{closeModal:function(){return a(!1)},activeIngredientList:T,activeIngredientsLoading:P,aptitudeList:V,aptitudesLoading:R,cropList:F,cropsLoading:G,residualLimitPost:g})})}),Object(C.jsx)(b.a,{components:{Toolbar:function(){return Object(C.jsxs)(b.c,{children:[Object(C.jsx)(d.a,{color:"primary",startIcon:Object(C.jsx)(p.a,{}),onClick:function(){return a(!0)},children:"Agregar"}),Object(C.jsx)(d.a,{color:"primary",startIcon:Object(C.jsx)(h.a,{}),disabled:!j.length,onClick:function(){j.forEach((function(e){return w("".concat(e))}))},children:"Eliminar"}),Object(C.jsx)(b.b,{}),Object(C.jsx)(b.e,{}),Object(C.jsx)(b.d,{})]})}},rows:y.map(k),columns:q,checkboxSelection:!0,editMode:"row",loading:E,onRowEditStop:_,onSelectionModelChange:function(e){return O(e)},sortModel:[{field:"id",sort:"asc"}],localeText:b.f.components.MuiDataGrid.defaultProps.localeText})]})})},M=n(48),T=n(249),P=n(248),N=n(246),V=n(245),R=Object(M.b)();var A=function(){return Object(C.jsx)(T.a,{theme:R,children:Object(C.jsx)(x.a,{url:"https://horticultura.herokuapp.com",children:Object(C.jsxs)(l.a,{sx:{flexGrow:1},children:[Object(C.jsx)(P.a,{position:"static",children:Object(C.jsx)(N.a,{children:Object(C.jsx)(V.a,{variant:"h6",children:"L\xedmites m\xe1ximos de residuos (LMR)"})})}),Object(C.jsx)(E,{})]})})})};o.a.render(Object(C.jsx)(a.a.StrictMode,{children:Object(C.jsx)(A,{})}),document.getElementById("root"))}},[[160,1,2]]]);
//# sourceMappingURL=main.476f13d6.chunk.js.map