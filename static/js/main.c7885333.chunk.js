(this["webpackJsonphorticultura-oo2"]=this["webpackJsonphorticultura-oo2"]||[]).push([[0],{162:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(46),c=a.n(r),s=a(9),o=a(58),d=a(251),l=a(244),u=a(106),j=a(108),b=a(86),p=a(33),m=a(240),x=a(56),O=a(100),h=a.n(O),g=a(128),f=a.n(g),v=a(127),w=a.n(v),C=a(39),k=a(55),I=a(17),y=a(233),L=a(239),S=a(105),P=a(247),T=a(176),A=a(135),M=a(2),E={top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"70%",height:{xs:"65%",md:"30%"},position:"absolute",bgcolor:"#FFF",padding:"2em"},R=Object(n.forwardRef)((function(e,t){var a=e.closeModal,i=e.activeIngredientList,r=e.activeIngredientsLoading,c=e.aptitudeList,d=e.aptitudesLoading,u=e.cropList,j=e.cropsLoading,b=e.residualLimitPost,p=(e.residualLimitGet,e.dataset),m=e.datasetPut,x=Object(n.useState)(null),O=Object(s.a)(x,2),h=O[0],g=O[1],f=Object(n.useState)(null),v=Object(s.a)(f,2),w=v[0],C=v[1],R=Object(n.useState)(null),F=Object(s.a)(R,2),D=F[0],N=F[1],V=Object(n.useState)(0),_=Object(s.a)(V,2),G=_[0],B=_[1],q=Object(n.useState)(!1),z=Object(s.a)(q,2),J=z[0],W=z[1],H=Object(n.useCallback)((function(e,t){var n={active_ingredient:"".concat(h),aptitude:"".concat(w),crop:"".concat(D),residual:"".concat(G),harvest:"".concat(J)};b(n).then((function(e){var t=e.id,a=p.residual_limits.map((function(e){return e.id}));m("".concat(p.id),{residual_limits:[].concat(Object(I.a)(a),[t])})})),a()}),[p,m,b,h,w,D,G,J,a]);return Object(M.jsxs)(l.a,{sx:E,ref:t,children:[Object(M.jsx)("h2",{children:"Agregar"}),Object(M.jsxs)(y.a,{direction:{xs:"column",md:"row"},justifyContent:"center",alignItems:"center",spacing:{xs:1,md:2},children:[Object(M.jsx)(L.a,{sx:{width:"100%"},id:"activeIngredient",options:i,getOptionLabel:function(e){return e.name},onChange:function(e,t){g(t?t.id:null)},loading:r,isOptionEqualToValue:function(e,t){return e.id===t.id},renderInput:function(e){return Object(M.jsx)(S.a,Object(k.a)(Object(k.a)({},e),{},{label:"Ingrediente activo",variant:"outlined"}))}}),Object(M.jsx)(L.a,{sx:{width:"100%"},id:"aptitudes",options:c,getOptionLabel:function(e){return e.name},onChange:function(e,t){C(t?t.id:null)},loading:d,isOptionEqualToValue:function(e,t){return e.id===t.id},renderInput:function(e){return Object(M.jsx)(S.a,Object(k.a)(Object(k.a)({},e),{},{label:"Aptitud",variant:"outlined"}))}}),Object(M.jsx)(L.a,{sx:{width:"100%"},id:"crops",options:u,getOptionLabel:function(e){return e.name},onChange:function(e,t){N(t?t.id:null)},loading:j,isOptionEqualToValue:function(e,t){return e.id===t.id},renderInput:function(e){return Object(M.jsx)(S.a,Object(k.a)(Object(k.a)({},e),{},{label:"Cultivos",variant:"outlined"}))}})]}),Object(M.jsxs)(y.a,{direction:{xs:"column",md:"row"},justifyContent:"left",alignItems:"center",spacing:{xs:1,md:2},sx:{paddingTop:"1em"},children:[Object(M.jsx)(S.a,{sx:{width:{xs:"100%",md:"32%",lg:"32.5%"}},id:"residual",label:"Residuos",type:"number",inputProps:{min:0},onChange:function(e,t){B(e.target.value)},endadornment:Object(M.jsx)(P.a,{position:"end",children:"g"})}),Object(M.jsx)(T.a,{control:Object(M.jsx)(A.a,{checked:J,onChange:function(e,t){W(t)}}),label:"Post Cosecha"})]}),Object(M.jsx)(y.a,{direction:{xs:"column",md:"row"},justifyContent:"flex-end",alignItems:"flex-end",spacing:{xs:1,md:2},sx:{paddingTop:"1em"},children:Object(M.jsx)(o.a,{variant:"contained",disabled:!(h&&w&&D&&G),onClick:H,children:"Guardar"})})]})})),F={top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"70%",height:{xs:"65%",md:"30%"},position:"absolute",bgcolor:"#FFF",padding:"2em"},D=Object(n.forwardRef)((function(e,t){var a=e.closeModal,i=e.datasetPost,r=Object(n.useState)(""),c=Object(s.a)(r,2),d=c[0],u=c[1],j=Object(n.useState)(""),b=Object(s.a)(j,2),p=b[0],m=b[1],x=Object(n.useCallback)((function(e,t){i({title:d,description:p}),a()}),[d,p,i,a]);return Object(M.jsxs)(l.a,{sx:F,ref:t,children:[Object(M.jsx)("h2",{children:"Agregar"}),Object(M.jsxs)(y.a,{direction:{xs:"column",md:"row"},justifyContent:"left",alignItems:"center",spacing:{xs:1,md:2},sx:{paddingTop:"1em"},children:[Object(M.jsx)(S.a,{sx:{width:{xs:"100%",md:"32%",lg:"32.5%"}},id:"title",label:"T\xedtulo",onChange:function(e,t){u(e.target.value)}}),Object(M.jsx)(S.a,{sx:{width:{xs:"100%",md:"32%",lg:"32.5%"}},id:"description",label:"Descripci\xf3n",multiline:!0,maxRows:4,onChange:function(e,t){m(e.target.value)}})]}),Object(M.jsx)(y.a,{direction:{xs:"column",md:"row"},justifyContent:"flex-end",alignItems:"flex-end",spacing:{xs:1,md:2},sx:{paddingTop:"1em"},children:Object(M.jsx)(o.a,{variant:"contained",disabled:!d,onClick:x,children:"Guardar"})})]})})),N=a(242),V=a(249),_=function(e){var t="";switch(e){case 401:t="Acceso no autorizado";break;case 403:t="Acceso denegado";break;case 404:t="Recurso no encontrado";break;case 405:case 406:case 407:case 408:case 409:case 410:case 411:case 412:case 413:case 414:case 415:case 416:case 417:case 418:t="Error desconocido, por favor, contacte con el administrador del sitio";break;case 500:case 501:case 502:case 503:case 505:case 511:t="Error interno del servidor, por favor, contacte con el administrador del sitio";break;case 504:t="Se esper\xf3 demasiado tiempo la respuesta, por favor, intentelo m\xe1s tarde";break;default:t="Problema de conexi\xf3n"}return t},G=function(e){var t=e.data;return t.reduce((function(e,t){return e||t.error}),!1)?Object(M.jsxs)(N.a,{style:{marginTop:"1em",marginBottom:"1em"},severity:"error",children:[Object(M.jsx)(V.a,{children:"Algo sali\xf3 mal"}),Object(M.jsx)("ul",{children:t.map((function(e){return e.error&&Object(M.jsxs)("li",{children:[Object(M.jsx)("b",{children:e.msg})," ",_(e.response.status)]})}))})]}):null},B=function(e){return{id:e.id,activeIngredient:e.active_ingredient.name,aptitude:e.aptitude.name,crop:e.crop.name,residual:e.residual,harvest:e.harvest}},q=function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],i=t[1],r=Object(n.useState)([]),c=Object(s.a)(r,2),O=c[0],g=c[1],v={data:[],cachePolicy:"no-cache"},k=Object(C.b)("/residual-limits",{data:{}}),I=k.error,y=k.response,L=k.post,S=k.put,P=k.del,T=Object(C.b)("/datasets",{cachePolicy:"no-cache",data:{}}),A=T.error,E=T.response,F=T.post,N=T.get,V=T.put,_=Object(C.b)("/datasets",v,[E.data]),q=_.error,z=_.response,J=_.data,W=_.loading,H=Object(C.b)("/active-ingredients",v,[a]),K=H.error,Q=H.response,U=H.data,X=H.loading,Y=Object(C.b)("/aptitudes",v,[a]),Z=Y.error,$=Y.response,ee=Y.data,te=Y.loading,ae=Object(C.b)("/crops",v,[a]),ne=ae.error,ie=ae.response,re=ae.data,ce=ae.loading,se=[{field:"id",headerName:"ID",width:75,hide:!0,sortable:!1,disableExport:!0},{field:"activeIngredient",headerName:"Ingredientes activos",flex:3,editable:!0,type:"singleSelect",valueOptions:Q.ok?U.map((function(e){return e.name})):[],sortable:!1},{field:"aptitude",headerName:"Aptiudes",flex:2,editable:!0,type:"singleSelect",valueOptions:$.ok?ee.map((function(e){return e.name})):[],sortable:!1},{field:"crop",headerName:"Cultivos",flex:1,editable:!0,type:"singleSelect",valueOptions:ie.ok?re.map((function(e){return e.name})):[],sortable:!1},{field:"residual",headerName:"Residuos",flex:1,editable:!0,type:"number",sortable:!1},{field:"harvest",headerName:"Post-cosecha",flex:1,editable:!0,type:"boolean",sortable:!1}],oe=Object(n.useCallback)((function(e,t){var a=U.find((function(t){return t.name===e.getValue(e.id,"activeIngredient")})),n=ee.find((function(t){return t.name===e.getValue(e.id,"aptitude")})),i=re.find((function(t){return t.name===e.getValue(e.id,"crop")})),r={active_ingredient:"".concat(a.id),aptitude:"".concat(n.id),crop:"".concat(i.id),residual:"".concat(e.row.residual),harvest:"".concat(e.row.harvest)};S("".concat(e.row.id),r).then((function(){N("".concat(E.data.id))}))}),[N,E.data,S,U,ee,re]);return Object(M.jsx)(d.a,{maxWidth:"xl",children:Object(M.jsxs)(l.a,{sx:{height:600,width:"100%"},children:[Object(M.jsx)(G,{data:[{msg:"Operaciones con datasets: ",error:A,response:E},{msg:"Operaciones con residuos l\xedmite: ",error:I,response:y},{msg:"Datasets: ",error:q,response:z},{msg:"Ingredientes activos: ",error:K,response:Q},{msg:"Aptiudes: ",error:Z,response:$},{msg:"Cultivos: ",error:ne,response:ie}]}),Object(M.jsxs)(l.a,{style:{marginTop:"1em",marginBottom:"1em"},children:[Object(M.jsxs)(u.a,{id:"dataset-label",children:["Dataset",E.ok&&E.data.description&&Object(M.jsx)(j.a,{title:E.data.description,placement:"right",children:Object(M.jsx)("sup",{children:Object(M.jsx)(f.a,{sx:{fontSize:15}})})})]}),Object(M.jsx)(b.a,{style:{width:"20em"},labelId:"dataset-label",id:"dataset-select",value:E.ok?E.data.id:"",label:"Dataset",onChange:function(e){var t=e.target.value;N("".concat(t))},children:z.ok&&J.map((function(e){return Object(M.jsx)(p.a,{value:e.id,children:e.title},e.id)}))}),Object(M.jsx)(o.a,{color:"primary",startIcon:Object(M.jsx)(h.a,{}),onClick:function(){return i("dataset")},children:"Agregar dataset"})]}),Object(M.jsx)(m.a,{open:Boolean(a),onClose:function(){return i("")},"aria-labelledby":"add-residual-limit","aria-describedby":"add-residual-limit-form",children:Object(M.jsxs)(M.Fragment,{children:["residualLimit"===a&&Object(M.jsx)(R,{closeModal:function(){return i("")},activeIngredientList:U,activeIngredientsLoading:X,aptitudeList:ee,aptitudesLoading:te,cropList:re,cropsLoading:ce,residualLimitPost:L,dataset:E.data,datasetPut:V}),"dataset"===a&&Object(M.jsx)(D,{closeModal:function(){return i("")},datasetPost:F})]})}),Object(M.jsx)(x.a,{components:{Toolbar:function(){return Object(M.jsxs)(x.c,{children:[Object(M.jsx)(o.a,{color:"primary",startIcon:Object(M.jsx)(h.a,{}),disabled:!Object.entries(E.data).length,onClick:function(){return i("residualLimit")},children:"Agregar"}),Object(M.jsx)(o.a,{color:"primary",startIcon:Object(M.jsx)(w.a,{}),disabled:!O.length,onClick:function(){var e=O.map((function(e){return P("".concat(e))}));Promise.all(e).then((function(){N("".concat(E.data.id))}))},children:"Eliminar"}),Object(M.jsx)(x.b,{}),Object(M.jsx)(x.e,{}),Object(M.jsx)(x.d,{})]})}},rows:E.ok?E.data.residual_limits.map(B):[],columns:se,checkboxSelection:!0,editMode:"row",loading:W,onRowEditStop:oe,onSelectionModelChange:function(e){return g(e)},sortModel:[{field:"id",sort:"asc"}],localeText:x.f.components.MuiDataGrid.defaultProps.localeText})]})})},z=a(48),J=a(253),W=a(252),H=a(250),K=a(248),Q=Object(z.b)();var U=function(){return Object(M.jsx)(J.a,{theme:Q,children:Object(M.jsx)(C.a,{url:"https://horticultura.herokuapp.com",children:Object(M.jsxs)(l.a,{sx:{flexGrow:1},children:[Object(M.jsx)(W.a,{position:"static",children:Object(M.jsx)(H.a,{children:Object(M.jsx)(K.a,{variant:"h6",children:"L\xedmites m\xe1ximos de residuos (LMR)"})})}),Object(M.jsx)(q,{})]})})})};c.a.render(Object(M.jsx)(i.a.StrictMode,{children:Object(M.jsx)(U,{})}),document.getElementById("root"))}},[[162,1,2]]]);
//# sourceMappingURL=main.c7885333.chunk.js.map