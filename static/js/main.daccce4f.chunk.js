(this["webpackJsonphorticultura-oo2"]=this["webpackJsonphorticultura-oo2"]||[]).push([[0],{161:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),c=a(46),r=a.n(c),o=a(9),s=a(58),d=a(250),l=a(243),u=a(75),b=a(103),j=a(85),p=a(33),m=a(239),O=a(56),h=a(126),x=a.n(h),f=a(127),g=a.n(f),v=a(39),I=a(55),k=a(17),w=a(232),L=a(238),y=a(102),C=a(246),S=a(175),P=a(134),T=a(2),E={top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"70%",height:{xs:"65%",md:"30%"},position:"absolute",bgcolor:"#FFF",padding:"2em"},M=Object(n.forwardRef)((function(e,t){var a=e.closeModal,i=e.activeIngredientList,c=e.activeIngredientsLoading,r=e.aptitudeList,d=e.aptitudesLoading,u=e.cropList,b=e.cropsLoading,j=e.residualLimitPost,p=(e.residualLimitGet,e.dataset),m=e.datasetPut,O=Object(n.useState)(null),h=Object(o.a)(O,2),x=h[0],f=h[1],g=Object(n.useState)(null),v=Object(o.a)(g,2),M=v[0],A=v[1],N=Object(n.useState)(null),R=Object(o.a)(N,2),V=R[0],_=R[1],D=Object(n.useState)(0),F=Object(o.a)(D,2),G=F[0],q=F[1],B=Object(n.useState)(!1),J=Object(o.a)(B,2),W=J[0],z=J[1],H=Object(n.useCallback)((function(e,t){var n={active_ingredient:"".concat(x),aptitude:"".concat(M),crop:"".concat(V),residual:"".concat(G),harvest:"".concat(W)};j(n).then((function(e){var t=e.id,a=p.residual_limits.map((function(e){return e.id}));m("".concat(p.id),{residual_limits:[].concat(Object(k.a)(a),[t])})})),a()}),[p,m,j,x,M,V,G,W,a]);return Object(T.jsxs)(l.a,{sx:E,ref:t,children:[Object(T.jsx)("h2",{children:"Agregar"}),Object(T.jsxs)(w.a,{direction:{xs:"column",md:"row"},justifyContent:"center",alignItems:"center",spacing:{xs:1,md:2},children:[Object(T.jsx)(L.a,{sx:{width:"100%"},id:"activeIngredient",options:i,getOptionLabel:function(e){return e.name},onChange:function(e,t){f(t?t.id:null)},loading:c,isOptionEqualToValue:function(e,t){return e.id===t.id},renderInput:function(e){return Object(T.jsx)(y.a,Object(I.a)(Object(I.a)({},e),{},{label:"Ingrediente activo",variant:"outlined"}))}}),Object(T.jsx)(L.a,{sx:{width:"100%"},id:"aptitudes",options:r,getOptionLabel:function(e){return e.name},onChange:function(e,t){A(t?t.id:null)},loading:d,isOptionEqualToValue:function(e,t){return e.id===t.id},renderInput:function(e){return Object(T.jsx)(y.a,Object(I.a)(Object(I.a)({},e),{},{label:"Aptitud",variant:"outlined"}))}}),Object(T.jsx)(L.a,{sx:{width:"100%"},id:"crops",options:u,getOptionLabel:function(e){return e.name},onChange:function(e,t){_(t?t.id:null)},loading:b,isOptionEqualToValue:function(e,t){return e.id===t.id},renderInput:function(e){return Object(T.jsx)(y.a,Object(I.a)(Object(I.a)({},e),{},{label:"Cultivos",variant:"outlined"}))}})]}),Object(T.jsxs)(w.a,{direction:{xs:"column",md:"row"},justifyContent:"left",alignItems:"center",spacing:{xs:1,md:2},sx:{paddingTop:"1em"},children:[Object(T.jsx)(y.a,{sx:{width:{xs:"100%",md:"32%",lg:"32.5%"}},id:"residual",label:"Residuos",type:"number",inputProps:{min:0},onChange:function(e,t){q(e.target.value)},endadornment:Object(T.jsx)(C.a,{position:"end",children:"g"})}),Object(T.jsx)(S.a,{control:Object(T.jsx)(P.a,{checked:W,onChange:function(e,t){z(t)}}),label:"Post Cosecha"})]}),Object(T.jsx)(w.a,{direction:{xs:"column",md:"row"},justifyContent:"flex-end",alignItems:"flex-end",spacing:{xs:1,md:2},sx:{paddingTop:"1em"},children:Object(T.jsx)(s.a,{variant:"contained",disabled:!(x&&M&&V&&G),onClick:H,children:"Guardar"})})]})})),A=a(241),N=a(248),R=function(e){var t="";switch(e){case 401:t="Acceso no autorizado";break;case 403:t="Acceso denegado";break;case 404:t="Recurso no encontrado";break;case 405:case 406:case 407:case 408:case 409:case 410:case 411:case 412:case 413:case 414:case 415:case 416:case 417:case 418:t="Error desconocido, por favor, contacte con el administrador del sitio";break;case 500:case 501:case 502:case 503:case 505:case 511:t="Error interno del servidor, por favor, contacte con el administrador del sitio";break;case 504:t="Se esper\xf3 demasiado tiempo la respuesta, por favor, intentelo m\xe1s tarde";break;default:t="Problema de conexi\xf3n"}return t},V=function(e){var t=e.data;return t.reduce((function(e,t){return e&&t.error}))?Object(T.jsxs)(A.a,{style:{marginTop:"1em",marginBottom:"1em"},severity:"error",children:[Object(T.jsx)(N.a,{children:"Algo sali\xf3 mal"}),Object(T.jsx)("ul",{children:t.map((function(e){return e.error&&Object(T.jsxs)("li",{children:[Object(T.jsx)("b",{children:e.msg})," ",R(e.response.status)]})}))})]}):null},_=function(e){return{id:e.id,activeIngredient:e.active_ingredient.name,aptitude:e.aptitude.name,crop:e.crop.name,residual:e.residual,harvest:e.harvest}},D=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],i=t[1],c=Object(n.useState)([]),r=Object(o.a)(c,2),h=r[0],f=r[1],I={data:[],cachePolicy:"no-cache"},k=Object(v.b)("/residual-limits",{data:{}}),w=(k.error,k.response,k.post),L=k.put,y=k.del,C=Object(v.b)("/datasets",{cachePolicy:"no-cache",data:{}}),S=(C.error,C.response),P=C.get,E=C.put,A=Object(v.b)("/datasets",I,[]),N=(A.error,A.response,A.data),R=A.loading,D=Object(v.b)("/active-ingredients",I,[a]),F=(D.error,D.response),G=D.data,q=D.loading,B=Object(v.b)("/aptitudes",I,[a]),J=(B.error,B.response),W=B.data,z=B.loading,H=Object(v.b)("/crops",I,[a]),K=(H.error,H.response),Q=H.data,U=H.loading,X=[{field:"id",headerName:"ID",width:75,hide:!0,sortable:!1,disableExport:!0},{field:"activeIngredient",headerName:"Ingredientes activos",flex:3,editable:!0,type:"singleSelect",valueOptions:F.ok?G.map((function(e){return e.name})):[],sortable:!1},{field:"aptitude",headerName:"Aptiudes",flex:2,editable:!0,type:"singleSelect",valueOptions:J.ok?W.map((function(e){return e.name})):[],sortable:!1},{field:"crop",headerName:"Cultivos",flex:1,editable:!0,type:"singleSelect",valueOptions:K.ok?Q.map((function(e){return e.name})):[],sortable:!1},{field:"residual",headerName:"Residuos",flex:1,editable:!0,type:"number",sortable:!1},{field:"harvest",headerName:"Post-cosecha",flex:1,editable:!0,type:"boolean",sortable:!1}],Y=Object(n.useCallback)((function(e,t){var a=G.find((function(t){return t.name===e.getValue(e.id,"activeIngredient")})),n=W.find((function(t){return t.name===e.getValue(e.id,"aptitude")})),i=Q.find((function(t){return t.name===e.getValue(e.id,"crop")})),c={active_ingredient:"".concat(a.id),aptitude:"".concat(n.id),crop:"".concat(i.id),residual:"".concat(e.row.residual),harvest:"".concat(e.row.harvest)};L("".concat(e.row.id),c).then((function(){P("".concat(S.data.id))}))}),[P,S.data,L,G,W,Q]);return Object(T.jsx)(d.a,{maxWidth:"xl",children:Object(T.jsxs)(l.a,{sx:{height:700,width:"100%"},children:[Object(T.jsx)(V,{data:["dataset","residualLimit","activeIngredient","aptitude","crop"]}),Object(T.jsxs)(u.a,{style:{marginTop:"1em",marginBottom:"1em"},fullWidth:!0,children:[Object(T.jsx)(b.a,{id:"dataset-label",children:"Dataset"}),Object(T.jsx)(j.a,{labelId:"dataset-label",id:"dataset-select",value:S.ok?S.data.id:"",label:"Dataset",onChange:function(e){var t=e.target.value;P("".concat(t))},children:N.map((function(e){return Object(T.jsx)(p.a,{value:e.id,children:e.title},e.id)}))})]}),Object(T.jsx)(m.a,{open:a,onClose:function(){return i(!1)},"aria-labelledby":"add-residual-limit","aria-describedby":"add-residual-limit-form",children:Object(T.jsx)(T.Fragment,{children:Object(T.jsx)(M,{closeModal:function(){return i(!1)},activeIngredientList:G,activeIngredientsLoading:q,aptitudeList:W,aptitudesLoading:z,cropList:Q,cropsLoading:U,residualLimitPost:w,dataset:S.data,datasetPut:E})})}),Object(T.jsx)(O.a,{components:{Toolbar:function(){return Object(T.jsxs)(O.c,{children:[Object(T.jsx)(s.a,{color:"primary",startIcon:Object(T.jsx)(x.a,{}),disabled:!Object.entries(S.data).length,onClick:function(){return i(!0)},children:"Agregar"}),Object(T.jsx)(s.a,{color:"primary",startIcon:Object(T.jsx)(g.a,{}),disabled:!h.length,onClick:function(){var e=h.map((function(e){return y("".concat(e))}));Promise.all(e).then((function(){P("".concat(S.data.id))}))},children:"Eliminar"}),Object(T.jsx)(O.b,{}),Object(T.jsx)(O.e,{}),Object(T.jsx)(O.d,{})]})}},rows:S.ok?S.data.residual_limits.map(_):[],columns:X,checkboxSelection:!0,editMode:"row",loading:R,onRowEditStop:Y,onSelectionModelChange:function(e){return f(e)},sortModel:[{field:"id",sort:"asc"}],localeText:O.f.components.MuiDataGrid.defaultProps.localeText})]})})},F=a(48),G=a(252),q=a(251),B=a(249),J=a(247),W=Object(F.b)();var z=function(){return Object(T.jsx)(G.a,{theme:W,children:Object(T.jsx)(v.a,{url:"https://horticultura.herokuapp.com",children:Object(T.jsxs)(l.a,{sx:{flexGrow:1},children:[Object(T.jsx)(q.a,{position:"static",children:Object(T.jsx)(B.a,{children:Object(T.jsx)(J.a,{variant:"h6",children:"L\xedmites m\xe1ximos de residuos (LMR)"})})}),Object(T.jsx)(D,{})]})})})};r.a.render(Object(T.jsx)(i.a.StrictMode,{children:Object(T.jsx)(z,{})}),document.getElementById("root"))}},[[161,1,2]]]);
//# sourceMappingURL=main.daccce4f.chunk.js.map